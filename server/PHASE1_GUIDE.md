# Phase 1: Story & Content Guide

## Overview
Phase 1 expands the game from a short intro to a full story arc with 40+ nodes, multiple endings, and significant player agency. The narrative explores themes of identity, sacrifice, and the ethics of power.

## Main Story Arc

### Act I: Awakening (Nodes: intro_01 - intro_main_hall)
- Player wakes in the manor with no memory
- Explores the initial room and discovers the symbol
- Encounters the mysterious candle and begins uncovering clues
- Finds the worn journal and begins to piece together the truth
- Optional: Discovers Elena, a living NPC who reveals the situation

**Key Decision Points:**
- Whether to investigate the light or explore the room
- Whether to blow out the candle and plunge into darkness
- Whether to take the journal or leave it

### Act II: Investigation (Nodes: intro_hallway - rune_chamber)
- Explores the manor more deeply
- Discovers the basement and encounters the altar
- Finds weapons, armor, and magical items
- Reads books in the library about "The Seal of Binding"
- Optional: Finds a prisoner who adds another layer to the mystery
- Optional: Encounters Lyra in the forest

**Key Decision Points:**
- Which areas to explore and in what order
- Whether to read journals and books (requires Wisdom/Perception)
- Whether to use the ancient key to access the underground passage
- Whether to communicate with the entity in the pool

### Act III: Truth & Choice (Nodes: escape_sequence - final_choice_hub)
- Elena helps player escape through hidden passages
- Player exits the manor and sees the wider world
- Encounters multiple factions with different goals
- Realizes the truth: you are a seal containing an ancient entity
- Three major endings become available

**Key Decision Points:**
- Whether to escape with Elena or stay and confront the truth
- Which path to take (village, forest, mountains)
- Final choice: Freedom, Guardianship, or Rebellion

## Available Paths & Branches

### Early Game Branches
1. **Light Investigation Path** → Discover the symbol early
2. **Room Exploration Path** → More gradual discovery
3. **Darkness Path** → Encounter the mysterious whisper

### Mid Game Branches
1. **Escape Path** → Elena helps you flee
2. **Confrontation Path** → Stay and fight the pursuers
3. **Prisoner Path** → Rescue someone and learn more
4. **Lyra Path** → Meet the mysterious facilitator

### Late Game Branches (Act III)
1. **Village Route** → Seek normalcy and information
2. **Forest Route** → Encounter Lyra or face wilderness
3. **Mountain Route** → Meet the cult guarding the manor

### Final Endings
1. **Freedom Ending** → Escape and live a normal life
   - Requirements: No specific stat requirements
   - Consequences: Seal breaks naturally, entity eventually escapes
   
2. **Guardian Ending** → Become the eternal keeper
   - Requirements: Wisdom ≥ 10
   - Consequences: Immortality, loneliness, eternal responsibility
   
3. **Rebellion Ending** → Intentionally free the entity
   - Requirements: Strength ≥ 12
   - Consequences: World transformed, you become a bridge between worlds

## NPC Encounters

### Elena (second_floor encounter)
- **Role**: Sympathetic insider, former researcher with regrets
- **Goal**: Help you escape before "the others" return
- **Interactions**: Provides escape route and supplies
- **Development**: Sacrifices herself to buy time for your escape

### Lyra (forest_encounter)
- **Role**: Mysterious facilitator of change
- **Goal**: Free the entity peacefully
- **Goal**: Create coexistence between worlds
- **Interactions**: Offers guidance and support for rebellion/guardian routes

### Sarah (village_exploration)
- **Role**: Healer, offers shelter
- **Goal**: Help lost people
- **Interactions**: Provides rest and healing

### The Prisoner (prisoner_room)
- **Role**: Fellow victim, source of hidden knowledge
- **Goal**: Free the entity through ritual
- **Interactions**: Provides clues about alternative paths

### The Entity (pool_communication)
- **Role**: Ancient being, the real center of the story
- **Goal**: Freedom and communication
- **Interactions**: Direct telepathic communication if player touches the pool

## Stat Check Requirements

### Perception Checks (Unlock Hidden Options)
- Perception ≥ 5: Basic investigations
- Perception ≥ 6: Find more clues
- Perception ≥ 7: Discover secrets
- Perception ≥ 8: Ancient knowledge

### Wisdom Checks (Unlock Special Knowledge)
- Wisdom ≥ 6: Read journals, understand rituals
- Wisdom ≥ 7: Meditate and recover memories
- Wisdom ≥ 8: Study ancient runes
- Wisdom ≥ 9: Touch the pool safely
- Wisdom ≥ 10: Guardian Ending requirement

### Strength Checks (Overcome Obstacles)
- Strength ≥ 6: Open shuttered windows
- Strength ≥ 7: Escape through window
- Strength ≥ 8: Smash locked doors, open stone boxes
- Strength ≥ 10: Fight pursuers
- Strength ≥ 12: Rebellion Ending requirement

### Agility Checks (Navigate Danger)
- Agility ≥ 5: General movement
- Agility ≥ 6: Flee combat safely
- Agility ≥ 7: Climb and parkour

### Vitality Checks (Endure Hardship)
- Vitality ≥ 4: Basic survival
- Vitality ≥ 7: Navigate harsh mountains

## Items & Equipment

### Quest Items
- **Worn Journal** - Found under the bed, reveals experiment details
- **Ancient Key** - Opens passage to underground cavern
- **Ceremonial Dagger** - Weapon with mystical properties
- **Knowledge: The Seal** - Understanding of binding magic
- **Ancient Amulet** - Found in forest temple
- **East Wing Key** - Provided by Elena for escape

### Weapons
- **Wooden Bow** - Found in armory, +1 Agility
- **Ceremonial Dagger** - Found in basement, mystical properties

### Consumables Available
- Healing Potion (30 HP)
- Greater Healing Potion (60 HP)
- Mana Potion (20 MP)
- Mana Elixir (40 MP)
- Strength Draught (+2 Strength)
- Vitality Brew (+2 Vitality)
- Agility Tonic (+2 Agility)
- Wisdom Tea (+2 Wisdom)
- Perception Essence (+2 Perception)

## Flag System

Flags track major story decisions:
- `saw_light` - Examined the candle
- `explored_room` - Looked around the initial room
- `examined_symbol` - Found the seal of binding
- `candle_blown` - Extinguished the light
- `heard_whisper` - Encountered the mysterious voice
- `memory_recovered` - Recovered partial memories
- `identity_revealed` - Learned you were the subject
- `was_experiment` - Understood the ritual's purpose
- `escaped_manor` - Left the building
- `met_elena` - Encountered Elena
- `met_lyra` - Encountered Lyra
- `entity_communicated` - Directly spoke with the entity
- `ancient_truth_known` - Understood the full history
- `kept_guardian` - Chose to stay as guardian
- `escaped_and_free` - Chose freedom ending
- `rebellion_started` - Chose to break the seal

## Experience & Leveling

### Base Experience Rewards
- Simple discoveries: 5-10 XP
- Moderate revelations: 15-25 XP
- Major story advances: 30-50 XP
- Ending completions: 50-75 XP

### Level-Up Path
- Level 1: Starts with 5 free points
- Level 2: Unlocked around node intro_hallway (100 XP threshold)
- Level 3+: Increasingly difficult thresholds

### Recommended Stat Allocation Strategy
For Freedom Route:
- Balanced approach (equal distribution)

For Guardian Route:
- Focus on Wisdom and Defense

For Rebellion Route:
- Focus on Strength and Perception

## Combat System (Phase 1 - Basic)

The combat engine is initialized but not yet integrated into narrative nodes. 

**Future Integration (Phase 2):**
- Enemies encountered in specific nodes
- Player-chosen combat actions
- Risk/reward for combat encounters
- Loot and experience from defeating enemies

Example enemies planned:
- Manor Guard
- Cult Pursuer
- Forest Spirit
- Ancient Golem

## Test Save States

To test specific routes without replaying:
1. Edit `player_state.json` to set `current_node` to target node
2. Adjust `free_stat_points` and stat values as needed
3. Add items to inventory for testing

Example testing nodes:
- `woman_confession` - Test NPC encounter
- `underground_passage` - Test exploration
- `outside_world` - Test world exit
- `final_choice_hub` - Test ending branches

## Known Issues & TODOs

### Phase 1 TODOs
- [ ] Integrate combat system into narrative
- [ ] Implement interactive combat (player input for actions)
- [ ] Add more enemy types
- [ ] Create loot tables for defeated enemies
- [ ] Add music/ambient sounds (optional)

### Known Limitations
- Combat is currently auto-resolved (player always attacks)
- No equipment stat bonuses applied during combat
- No status effects (poison, stun, etc.)
- Limited NPC dialogue trees
- Consumable usage doesn't affect combat (yet)

## Extension Ideas for Phase 2

1. **Skill Trees**: Special abilities players can unlock
2. **Crafting System**: Create potions and items
3. **Faction System**: Align with Elena, Lyra, or the Entity
4. **Relationship Values**: NPC favorability affects outcomes
5. **Secrets & Achievements**: Hidden endings and bonuses
6. **Challenge Modes**: Speedrun, no-stat-increase, survival modes

